@inject Base_Framework.Domain.Core.Contracts.IAuthHelper AuthHelper

@model Help.EndPoints.RazorPage.Models.SideMenuViewModel


<div class="user-panel-card">
    <div class="user-panel-card-body">
        <div class="d-flex flex-column align-items-center text-center">
            <img src="~/Images/ProfilePictures/@Model.Picture.Name" alt="User" class="rounded-circle" height="150" width="150">
            <div class="mt-3">
                <h4>@Model.Picture.CustomerName</h4>
                <a asp-page="ChangeProfilePhoto" asp-area="UserPanel" asp-route-id="@Model.Picture.Id" class="btn btn-secondary">تغییر پروفایل</a>
                <a asp-page="./Account" asp-page-handler="Logout" class="btn btn-outline-danger">خروج</a>
            </div>
        </div>
    </div>
</div>

<div class="user-panel-card mt-3">
    <ul class="list-group list-group-flush">
        <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
            <a asp-page="AddHelpRequest">
                <h6 class="mb-0">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-earmark-plus-fill" viewBox="0 0 16 16">
                        <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0M9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1M8.5 7v1.5H10a.5.5 0 0 1 0 1H8.5V11a.5.5 0 0 1-1 0V9.5H6a.5.5 0 0 1 0-1h1.5V7a.5.5 0 0 1 1 0" />
                    </svg>ایجاد درخواست
                </h6>
            </a>
        </li>
        <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
            <a asp-page="HelpRequestList" asp-area="UserPanel" asp-route-id="@AuthHelper.CurrentAccountId()">
                <h6 class="mb-0">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house-gear-fill mx-2" viewBox="0 0 16 16">
                        <path d="M7.293 1.5a1 1 0 0 1 1.414 0L11 3.793V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v3.293l2.354 2.353a.5.5 0 0 1-.708.708L8 2.207 1.354 8.854a.5.5 0 1 1-.708-.708z" />
                        <path d="M11.07 9.047a1.5 1.5 0 0 0-1.742.26l-.02.021a1.5 1.5 0 0 0-.261 1.742 1.5 1.5 0 0 0 0 2.86 1.5 1.5 0 0 0-.12 1.07H3.5A1.5 1.5 0 0 1 2 13.5V9.293l6-6 4.724 4.724a1.5 1.5 0 0 0-1.654 1.03" />
                        <path d="m13.158 9.608-.043-.148c-.181-.613-1.049-.613-1.23 0l-.043.148a.64.64 0 0 1-.921.382l-.136-.074c-.561-.306-1.175.308-.87.869l.075.136a.64.64 0 0 1-.382.92l-.148.045c-.613.18-.613 1.048 0 1.229l.148.043a.64.64 0 0 1 .382.921l-.074.136c-.306.561.308 1.175.869.87l.136-.075a.64.64 0 0 1 .92.382l.045.149c.18.612 1.048.612 1.229 0l.043-.15a.64.64 0 0 1 .921-.38l.136.074c.561.305 1.175-.309.87-.87l-.075-.136a.64.64 0 0 1 .382-.92l.149-.044c.612-.181.612-1.049 0-1.23l-.15-.043a.64.64 0 0 1-.38-.921l.074-.136c.305-.561-.309-1.175-.87-.87l-.136.075a.64.64 0 0 1-.92-.382ZM12.5 14a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3" />
                    </svg>درخواست ها
                </h6>
            </a>
        </li>
        <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
            <h6 class="mb-0">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house-lock-fill mx-2" viewBox="0 0 16 16">
                    <path d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L8 2.207l6.646 6.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293z" />
                    <path d="m8 3.293 4.72 4.72a3 3 0 0 0-2.709 3.248A2 2 0 0 0 9 13v2H3.5A1.5 1.5 0 0 1 2 13.5V9.293z" />
                    <path d="M13 9a2 2 0 0 0-2 2v1a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1v-1a2 2 0 0 0-2-2m0 1a1 1 0 0 1 1 1v1h-2v-1a1 1 0 0 1 1-1" />
                </svg>پشنهاد ها
            </h6>

        </li>

        <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
            <a asp-page="/ChangePassword" asp-route-id="@AuthHelper.CurrentAccountId()">
                <h6 class="mb-0">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-key-fill mx-2" viewBox="0 0 16 16">
                        <path d="M3.5 11.5a3.5 3.5 0 1 1 3.163-5H14L15.5 8 14 9.5l-1-1-1 1-1-1-1 1-1-1-1 1H6.663a3.5 3.5 0 0 1-3.163 2M2.5 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2" />
                    </svg>تغییر رمز عبور
                </h6>
            </a>
        </li>

    </ul>
</div>
<div class="user-panel-card mt-3">
    <div class="login-form">
        <div class="row gutters-sm">
            <div class="col-sm-6 mb-3">
                <h6 class="d-flex align-items-center mb-3"><i class="material-icons text-info mr-2"></i>امتیازها</h6>
               

                <small>امتیاز به عنوان متخصص</small>
                <div>
                    <span id="start_rate1" class=" rating-star">
                        <i class="fa fa-star-o" aria-hidden="true"></i>
                        <i class="fa fa-star-o" aria-hidden="true"></i>
                        <i class="fa fa-star-o" aria-hidden="true"></i>
                        <i class="fa fa-star-o" aria-hidden="true"></i>
                        <i class="fa fa-star-o" aria-hidden="true"></i>
                    </span>
                </div>

                <div id="percent1">

                </div>
                <br />
                <small> امتیاز به عنوان درخواست دهنده</small>
             
                <div>
                    <span id="rate2" class=" rating-star">
                        <i class="fa fa-star-o" aria-hidden="true"></i>
                        <i class="fa fa-star-o" aria-hidden="true"></i>
                        <i class="fa fa-star-o" aria-hidden="true"></i>
                        <i class="fa fa-star-o" aria-hidden="true"></i>
                        <i class="fa fa-star-o" aria-hidden="true"></i>
                    </span>
                </div>

                <div id="percent2">
                </div>
            </div>
        </div>



        <script type="text/javascript">
            document.addEventListener('DOMContentLoaded', (event) => {

                var ratingValue = @Html.Raw(Model.RateAsExpert);
                var startlist = document.getElementById('start_rate1').childNodes
                for (var i = 0; i < ratingValue; i++) {
                    startlist[i*2+1].classList.remove('fa-star-o');
                    startlist[i*2+1].classList.add('fa-star');
                }
                document.getElementById('percent1').innerHTML = (ratingValue / 5 * 100) + "%"

                ratingValue = @Html.Raw(Model.RateAsRequester);
                console.log("...")
                var startlist2 = document.getElementById('rate2').childNodes
                for (var i = 0; i < ratingValue; i++) {
                    startlist2[i*2+1].classList.remove('fa-star-o');
                    startlist2[i*2+1].classList.add('fa-star');
                }
                document.getElementById('percent2').innerHTML = (ratingValue / 5 * 100) + "%"
            })
        </script>
